{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.module.ts","./src/app/app.routing.ts","./src/app/caching.service.ts","./src/app/current-conditions/current-conditions.component.ts","./src/app/forecasts-list/forecasts-list.component.ts","./src/app/helper.ts","./src/app/location.service.ts","./src/app/main-page/main-page.component.ts","./src/app/tab-group/tab-group.component.ts","./src/app/tab-group/tab-item/tab-item.component.ts","./src/app/weather.service.ts","./src/app/zipcode-entry/zipcode-entry.component.ts","./src/environments/environment.ts","./src/main.ts","./src/app/app.component.css","./src/app/current-conditions/current-conditions.component.css","./src/app/forecasts-list/forecasts-list.component.css","./src/app/tab-group/tab-group.component.css","./src/app/tab-group/tab-item/tab-item.component.css"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport {SwPush, SwUpdate} from '@angular/service-worker';\r\nimport {interval} from 'rxjs';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n\r\n    constructor() {\r\n\r\n    }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { ZipcodeEntryComponent } from './zipcode-entry/zipcode-entry.component';\r\nimport {LocationService} from \"./location.service\";\r\nimport { ForecastsListComponent } from './forecasts-list/forecasts-list.component';\r\nimport {WeatherService} from \"./weather.service\";\r\nimport { CurrentConditionsComponent } from './current-conditions/current-conditions.component';\r\nimport { MainPageComponent } from './main-page/main-page.component';\r\nimport {RouterModule} from \"@angular/router\";\r\nimport {routing} from \"./app.routing\";\r\nimport {HttpClientModule} from \"@angular/common/http\";\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { environment } from '../environments/environment';\r\nimport { TabGroupComponent } from './tab-group/tab-group.component';\r\nimport { TabItemComponent } from './tab-group/tab-item/tab-item.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    ZipcodeEntryComponent,\r\n    ForecastsListComponent,\r\n    CurrentConditionsComponent,\r\n    MainPageComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    HttpClientModule,\r\n    RouterModule,\r\n    TabGroupComponent,\r\n    TabItemComponent,\r\n    routing,\r\n    ServiceWorkerModule.register('/ngsw-worker.js', { enabled: environment.production })\r\n  ],\r\n  providers: [LocationService, WeatherService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { ModuleWithProviders }  from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport {ForecastsListComponent} from \"./forecasts-list/forecasts-list.component\";\r\nimport {MainPageComponent} from \"./main-page/main-page.component\";\r\n\r\nconst appRoutes: Routes = [\r\n  {\r\n    path: '', component: MainPageComponent\r\n  },\r\n  {\r\n    path: 'forecast/:zipcode', component: ForecastsListComponent\r\n  }\r\n];\r\nexport const routing: ModuleWithProviders<any> = RouterModule.forRoot(appRoutes, {});\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class CachingService{\r\n    private readonly refetchInterval = 2 * (60*60); //using seconds, the 2 is hours multiplied by minutes and seconds\r\n\r\n    private get refetchIntervalInMS(){\r\n        return this.refetchInterval * 1000;\r\n    }\r\n\r\n    get<T>(key: string): T{\r\n        try {\r\n            return JSON.parse(localStorage.getItem(key))\r\n          } catch (e) {\r\n            console.error('Error getting data from localstorage', e)\r\n            return null\r\n          }\r\n    }\r\n\r\n    set<T>(key: string, obj: T){\r\n        const data = JSON.stringify(obj)\r\n        try {\r\n            localStorage.setItem(key, data)\r\n            } catch (e) {\r\n            console.error('Error saving to localStorage', e)\r\n            }\r\n    }\r\n\r\n    remove(key: string){\r\n        localStorage.removeItem(key);\r\n    }\r\n\r\n\r\n    getMillisecondsNow(): number{\r\n        const currentDate = new Date();\r\n        return currentDate.getTime();\r\n    }\r\n\r\n    shouldRefetchData(timeStamp: number): boolean{\r\n       return this.getMillisecondsNow() - timeStamp  > this.refetchIntervalInMS\r\n    }\r\n}","import {ChangeDetectionStrategy, Component, inject, Signal} from '@angular/core';\r\nimport {WeatherService} from \"../weather.service\";\r\nimport {LocationService} from \"../location.service\";\r\nimport {ConditionsAndZip} from '../conditions-and-zip.type';\r\n\r\n@Component({\r\n  selector: 'app-current-conditions',\r\n  templateUrl: './current-conditions.component.html',\r\n  styleUrls: ['./current-conditions.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CurrentConditionsComponent{\r\n\r\n  private weatherService = inject(WeatherService);\r\n  protected locationService = inject(LocationService);\r\n  protected currentConditionsByZip: Signal<ConditionsAndZip[]> = this.weatherService.getCurrentConditions();\r\n  activeTabIndex: number = 0;\r\n  \r\n\r\n  getTabs(){\r\n   return this.currentConditionsByZip().map(condition=> `${condition.data.name} (${condition.zip})`)\r\n  }\r\n\r\n  closeTab(index: number){\r\n    this.locationService.removeLocation(this.currentConditionsByZip()[index].zip)\r\n  }\r\n\r\n}\r\n","import { Component } from '@angular/core';\r\nimport {WeatherService} from '../weather.service';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {Forecast} from './forecast.type';\r\n\r\n@Component({\r\n  selector: 'app-forecasts-list',\r\n  templateUrl: './forecasts-list.component.html',\r\n  styleUrls: ['./forecasts-list.component.css']\r\n})\r\nexport class ForecastsListComponent {\r\n\r\n  zipcode: string;\r\n  forecast: Forecast;\r\n\r\n  constructor(protected weatherService: WeatherService, route : ActivatedRoute) {\r\n    route.params.subscribe(params => {\r\n      this.zipcode = params['zipcode'];\r\n      weatherService.analyzeForecast(this.zipcode)\r\n        .subscribe(data => this.forecast = data);\r\n    });\r\n  }\r\n}\r\n","export const compareArrays = (array1: string[], array2: string[]): string[] => {\r\n    return array1.filter(element => !array2.includes(element));\r\n}","import { Injectable, inject } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { CachingService } from './caching.service';\r\n\r\nexport const LOCATIONS : string = \"locations\";\r\n\r\n@Injectable()\r\nexport class LocationService {\r\n  \r\n  private locations: string[] = [];\r\n  private locationsSubject: BehaviorSubject<string[]> = new BehaviorSubject<string[]>(this.locations);\r\n  private cachingService = inject(CachingService);\r\n  locations$: Observable<string[]> = this.locationsSubject.asObservable();\r\n\r\n\r\n\r\n  constructor() {\r\n    let locString = this.cachingService.get<string[]>(LOCATIONS);\r\n    if (locString){\r\n      this.locations = locString;\r\n      this.locationsSubject.next(this.locations);\r\n    }\r\n  }\r\n\r\n  addLocation(zipcode : string) {\r\n    this.locations.push(zipcode);\r\n    this.updateLocationSubject();\r\n  }\r\n\r\n  removeLocation(zipcode : string) {\r\n    let index = this.locations.indexOf(zipcode);\r\n    if (index !== -1){\r\n      this.locations.splice(index, 1);\r\n      this.updateLocationSubject();\r\n    }\r\n  }\r\n\r\n  private updateLocationSubject(){\r\n    this.locationsSubject.next(this.locations);\r\n    this.cachingService.set<string[]>(LOCATIONS, this.locations);\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-main-page',\r\n  templateUrl: './main-page.component.html'\r\n})\r\nexport class MainPageComponent {\r\n\r\n}\r\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'app-tab-group',\r\n    templateUrl: 'tab-group.component.html',\r\n    styleUrls: ['tab-group.component.css'],\r\n    standalone: true,\r\n})\r\nexport class TabGroupComponent{\r\n    @Input() tabs: string[] = [];\r\n    @Output() closeTab = new EventEmitter<number | null>();\r\n    @Input() activeTabIndex: number = 0;\r\n    @Output() activeTabIndexChange: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n    onCloseTab(i){\r\n        this.closeTab.emit(i);\r\n        this.onSelectTab(i-1);\r\n    }\r\n\r\n    onSelectTab(i: number): void{\r\n        this.activeTabIndex = i;\r\n        this.activeTabIndexChange.emit(this.activeTabIndex);\r\n    }\r\n}","import { Component, Input, OnChanges, SimpleChanges } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'app-tab-item',\r\n    templateUrl: 'tab-item.component.html',\r\n    styleUrls: ['tab-item.component.css'],\r\n    standalone: true \r\n})\r\nexport class TabItemComponent{\r\n    @Input() index: number;\r\n    @Input() activeTabIndex: number;\r\n}","import {Injectable, OnDestroy, Signal, signal} from '@angular/core';\r\nimport {Observable, Subscription, from, of, throwError} from 'rxjs';\r\nimport { catchError, concatMap, exhaustMap, mergeMap, switchMap, tap, toArray } from 'rxjs/operators';\r\n\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {CurrentConditions} from './current-conditions/current-conditions.type';\r\nimport {ConditionsAndZip} from './conditions-and-zip.type';\r\nimport {Forecast} from './forecasts-list/forecast.type';\r\nimport { LOCATIONS, LocationService } from './location.service';\r\nimport { compareArrays } from './helper';\r\nimport { CachingService } from './caching.service';\r\nimport { ForecastsAndZip } from './forecasts-and-zip.type';\r\n\r\nexport const CONDITIONS : string = \"conditions\";\r\nexport const FORECASTS : string = \"forecasts\"\r\n\r\n@Injectable()\r\nexport class WeatherService implements OnDestroy {\r\n\r\n  static URL = 'https://api.openweathermap.org/data/2.5';\r\n  static APPID = '5a4b2d457ecbef9eb2a71e480b947604';\r\n  static ICON_URL = 'https://raw.githubusercontent.com/udacity/Sunshine-Version-2/sunshine_master/app/src/main/res/drawable-hdpi/';\r\n  private currentConditions = signal<ConditionsAndZip[]>([]);\r\n  private fiveDayForecasts = signal<ForecastsAndZip[]>([]);\r\n  private subscription: Subscription =  new Subscription();\r\n  constructor(\r\n    private http: HttpClient, \r\n    private locationService: LocationService,\r\n    private cachingService: CachingService) { \r\n    this.getForecastsFromCache();\r\n    this.subscription.add(this.locationService.locations$\r\n      .pipe(\r\n        switchMap((locations: string[])=> {\r\n          const removeArray = compareArrays(this.currentConditions().map(location=> location.zip),locations);\r\n          if(removeArray.length > 0) {return from(removeArray).pipe(concatMap(data=>this.removeZipCode(data)));}\r\n          else {this.currentConditions.update(()=>[]); return from(locations).pipe(\r\n            mergeMap(data=>this.analyzeCacheConditions(data)),\r\n            toArray()\r\n            );}\r\n        }),\r\n        tap(()=>{this.cachingService.set(CONDITIONS,this.currentConditions())})\r\n      )\r\n      .subscribe())\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n      this.subscription.unsubscribe();\r\n  }\r\n\r\n\r\n  getForecastsFromCache(){\r\n    let forecastData = this.cachingService.get<ForecastsAndZip[]>(FORECASTS);\r\n    if (forecastData){\r\n      this.fiveDayForecasts.update(forecast => {return [...forecastData,...forecast]})\r\n    }\r\n  }\r\n\r\n  removeZipCode(zipcode: string){\r\n    this.removeCurrentConditions(zipcode);\r\n    this.removeFiveDayForecasts(zipcode);\r\n    this.cachingService.set(FORECASTS,this.fiveDayForecasts())\r\n    return of()\r\n  }\r\n  \r\n  private removeCurrentConditions(zipcode: string): void {\r\n    this.currentConditions.update(conditions => {\r\n      for (let i in conditions) {\r\n        if (conditions[i].zip == zipcode)\r\n          conditions.splice(+i, 1);\r\n      }\r\n      return conditions;\r\n      })\r\n  }\r\n\r\n  private removeFiveDayForecasts(zipcode: string): void {\r\n    this.fiveDayForecasts.update(forecast => {\r\n      for (let i in forecast) {\r\n        if (forecast[i].zip == zipcode)\r\n          forecast.splice(+i, 1);\r\n      }\r\n      return forecast;\r\n      })\r\n  }\r\n\r\n  getCurrentConditions(): Signal<ConditionsAndZip[]> {\r\n    return this.currentConditions.asReadonly();\r\n  }\r\n\r\n  analyzeForecast(zipcode: string): Observable<Forecast>{\r\n    let cacheForecast = this.cachingService.get<ForecastsAndZip[]>(FORECASTS) || [];\r\n    let zipcodeIndex = cacheForecast.findIndex((forecast)=>{return zipcode===forecast.zip});\r\n    let request: Observable<Forecast> = of(null)\r\n    if(zipcodeIndex !== -1){\r\n      if(this.cachingService.shouldRefetchData(cacheForecast[zipcodeIndex].timeStamp)) request = this.getForecast(zipcode)\r\n      else return of(cacheForecast[zipcodeIndex].data);\r\n    }else request = this.getForecast(zipcode);\r\n    return request;\r\n  }\r\n\r\n \r\n\r\n  getWeatherIcon(id): string {\r\n    if (id >= 200 && id <= 232)\r\n      return WeatherService.ICON_URL + \"art_storm.png\";\r\n    else if (id >= 501 && id <= 511)\r\n      return WeatherService.ICON_URL + \"art_rain.png\";\r\n    else if (id === 500 || (id >= 520 && id <= 531))\r\n      return WeatherService.ICON_URL + \"art_light_rain.png\";\r\n    else if (id >= 600 && id <= 622)\r\n      return WeatherService.ICON_URL + \"art_snow.png\";\r\n    else if (id >= 801 && id <= 804)\r\n      return WeatherService.ICON_URL + \"art_clouds.png\";\r\n    else if (id === 741 || id === 761)\r\n      return WeatherService.ICON_URL + \"art_fog.png\";\r\n    else\r\n      return WeatherService.ICON_URL + \"art_clear.png\";\r\n  }\r\n\r\n\r\n  private analyzeCacheConditions(zipcode: string):Observable<CurrentConditions | null> {\r\n    let httpRequest: Observable<CurrentConditions | null> = of(null);\r\n    let cacheConditions = this.cachingService.get<ConditionsAndZip[]>(CONDITIONS) || [];\r\n    let zipcodeIndex = cacheConditions.findIndex((condition)=>{return zipcode===condition.zip});\r\n    if(zipcodeIndex !== -1){ //check if condition in cache\r\n       if(this.cachingService.shouldRefetchData(cacheConditions[zipcodeIndex].timeStamp)) httpRequest = this.fetchCurrentConditions(zipcode) //if condition's time has expired, fetch\r\n       else this.currentConditions.update(conditions => [...conditions, {...cacheConditions[zipcodeIndex]}]); //if condition's time has not expired, update signal\r\n    }else httpRequest = this.fetchCurrentConditions(zipcode) //if condition not in cache, fetch\r\n    return httpRequest;\r\n  }\r\n\r\n  private fetchCurrentConditions(zipcode: string):Observable<CurrentConditions | null>{\r\n    return this.http.get<CurrentConditions>(`${WeatherService.URL}/weather?zip=${zipcode},us&units=imperial&APPID=${WeatherService.APPID}`)\r\n    .pipe(\r\n      tap(data => {\r\n        this.currentConditions.update(conditions => [...conditions, {zip: zipcode, data, timeStamp: this.cachingService.getMillisecondsNow()}]);\r\n      }),\r\n      catchError((error)=>{\r\n        this.locationService.removeLocation(zipcode);\r\n        alert('Unable to fetch zipcode');\r\n        return throwError(error);\r\n      })\r\n    )\r\n  }\r\n\r\n  private getForecast(zipcode: string): Observable<Forecast> {\r\n    return this.http.get<Forecast>(`${WeatherService.URL}/forecast/daily?zip=${zipcode},us&units=imperial&cnt=5&APPID=${WeatherService.APPID}`)\r\n    .pipe(\r\n      tap(data => {\r\n        let index = this.fiveDayForecasts().findIndex(forecast=>forecast.zip === zipcode)\r\n        if(index === -1)  this.fiveDayForecasts.update(fiveDayForecasts =>[...fiveDayForecasts, {zip: zipcode, data, timeStamp: this.cachingService.getMillisecondsNow()}]);\r\n        else \r\n        this.fiveDayForecasts.update(fiveDayForecasts => fiveDayForecasts.map(forecast=>forecast.zip === zipcode ? {zip: zipcode, data, timeStamp: this.cachingService.getMillisecondsNow()}: forecast));\r\n        this.cachingService.set<ForecastsAndZip[]>(FORECASTS,this.fiveDayForecasts())\r\n      }),\r\n      catchError((error)=>{\r\n        this.locationService.removeLocation(zipcode);\r\n        alert('Unable to fetch zipcode');\r\n        return throwError(error);\r\n      })\r\n    )\r\n  }\r\n\r\n}\r\n","import { Component, ElementRef, ViewChild } from '@angular/core';\r\nimport {LocationService} from \"../location.service\";\r\n\r\n@Component({\r\n  selector: 'app-zipcode-entry',\r\n  templateUrl: './zipcode-entry.component.html'\r\n})\r\nexport class ZipcodeEntryComponent {\r\n  @ViewChild('zipcode') zipcode: ElementRef;\r\n\r\n  constructor(private service : LocationService) { }\r\n\r\n  addLocation(zipcode : string){\r\n    if(!zipcode){alert('You must enter a value'); return;}\r\n    this.service.addLocation(zipcode);\r\n    this.zipcode.nativeElement.value = '';\r\n  }\r\n\r\n}\r\n","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.close {\r\n  cursor: pointer;\r\n}\r\n.flex {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/current-conditions/current-conditions.component.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,eAAe;AACjB;AACA;EACE,aAAa;EACb,8BAA8B;AAChC\",\"sourcesContent\":[\".close {\\r\\n  cursor: pointer;\\r\\n}\\r\\n.flex {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.icon {\r\n  width: 45px;\r\n  height: 45px;\r\n  position: absolute;\r\n  right: 20px;\r\n  top: -2px;\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/forecasts-list/forecasts-list.component.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,WAAW;EACX,SAAS;AACX\",\"sourcesContent\":[\".icon {\\r\\n  width: 45px;\\r\\n  height: 45px;\\r\\n  position: absolute;\\r\\n  right: 20px;\\r\\n  top: -2px;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tab-group{\r\n    .tab-header{\r\n        ul{\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            padding: 0;\r\n            list-style-type: none;\r\n            margin: 0;\r\n            li{\r\n                padding: 10px;\r\n                background: rgb(97,122,160);\r\n                color: #fff;\r\n                margin-right: 5px;\r\n                border: 1px solid black;\r\n                &.active{\r\n                    background-color: #f5f5f5;\r\n                    color: black;\r\n                    font-weight: bold;\r\n                    a{\r\n                        color: black;\r\n                    }\r\n                }\r\n                &:hover{\r\n                    cursor: pointer;\r\n                }\r\n                span{\r\n                    margin-right: 20px;\r\n                }\r\n                a{\r\n                    color: #fff;\r\n                    &:hover{\r\n                        text-decoration: none;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/tab-group/tab-group.component.css\"],\"names\":[],\"mappings\":\"AAAA;IACI;QACI;YACI,aAAa;YACb,eAAe;YACf,UAAU;YACV,qBAAqB;YACrB,SAAS;YACT;gBACI,aAAa;gBACb,2BAA2B;gBAC3B,WAAW;gBACX,iBAAiB;gBACjB,uBAAuB;gBACvB;oBACI,yBAAyB;oBACzB,YAAY;oBACZ,iBAAiB;oBACjB;wBACI,YAAY;oBAChB;gBACJ;gBACA;oBACI,eAAe;gBACnB;gBACA;oBACI,kBAAkB;gBACtB;gBACA;oBACI,WAAW;oBACX;wBACI,qBAAqB;oBACzB;gBACJ;YACJ;QACJ;IACJ;AACJ\",\"sourcesContent\":[\".tab-group{\\r\\n    .tab-header{\\r\\n        ul{\\r\\n            display: flex;\\r\\n            flex-wrap: wrap;\\r\\n            padding: 0;\\r\\n            list-style-type: none;\\r\\n            margin: 0;\\r\\n            li{\\r\\n                padding: 10px;\\r\\n                background: rgb(97,122,160);\\r\\n                color: #fff;\\r\\n                margin-right: 5px;\\r\\n                border: 1px solid black;\\r\\n                &.active{\\r\\n                    background-color: #f5f5f5;\\r\\n                    color: black;\\r\\n                    font-weight: bold;\\r\\n                    a{\\r\\n                        color: black;\\r\\n                    }\\r\\n                }\\r\\n                &:hover{\\r\\n                    cursor: pointer;\\r\\n                }\\r\\n                span{\\r\\n                    margin-right: 20px;\\r\\n                }\\r\\n                a{\\r\\n                    color: #fff;\\r\\n                    &:hover{\\r\\n                        text-decoration: none;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tab-item{\r\n    border: 2px solid black;\r\n    padding: 20px;\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/tab-group/tab-item/tab-item.component.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,uBAAuB;IACvB,aAAa;AACjB\",\"sourcesContent\":[\".tab-item{\\r\\n    border: 2px solid black;\\r\\n    padding: 20px;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["Component","AppComponent","constructor","_","__decorate","selector","template","__NG_CLI_RESOURCE__0","BrowserModule","NgModule","FormsModule","ZipcodeEntryComponent","LocationService","ForecastsListComponent","WeatherService","CurrentConditionsComponent","MainPageComponent","RouterModule","routing","HttpClientModule","ServiceWorkerModule","environment","TabGroupComponent","TabItemComponent","AppModule","declarations","imports","register","enabled","production","providers","bootstrap","appRoutes","path","component","forRoot","Injectable","CachingService","refetchInterval","refetchIntervalInMS","get","key","JSON","parse","localStorage","getItem","e","console","error","set","obj","data","stringify","setItem","remove","removeItem","getMillisecondsNow","currentDate","Date","getTime","shouldRefetchData","timeStamp","providedIn","ChangeDetectionStrategy","inject","weatherService","locationService","currentConditionsByZip","getCurrentConditions","activeTabIndex","getTabs","map","condition","name","zip","closeTab","index","removeLocation","changeDetection","OnPush","ActivatedRoute","route","params","subscribe","zipcode","analyzeForecast","forecast","compareArrays","array1","array2","filter","element","includes","BehaviorSubject","LOCATIONS","locations","locationsSubject","cachingService","locations$","asObservable","locString","next","addLocation","push","updateLocationSubject","indexOf","splice","EventEmitter","Input","Output","tabs","activeTabIndexChange","onCloseTab","i","emit","onSelectTab","standalone","signal","Subscription","from","of","throwError","catchError","concatMap","mergeMap","switchMap","tap","toArray","HttpClient","CONDITIONS","FORECASTS","URL","_3","APPID","_4","ICON_URL","http","currentConditions","fiveDayForecasts","subscription","getForecastsFromCache","add","pipe","removeArray","location","length","removeZipCode","update","analyzeCacheConditions","ngOnDestroy","unsubscribe","forecastData","removeCurrentConditions","removeFiveDayForecasts","conditions","asReadonly","cacheForecast","zipcodeIndex","findIndex","request","getForecast","getWeatherIcon","id","WeatherService_1","httpRequest","cacheConditions","fetchCurrentConditions","alert","_5","ViewChild","service","nativeElement","value","args","enableProdMode","platformBrowserDynamic","bootstrapModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}